{"version":3,"file":"reactjs-s4y.cjs.development.js","sources":["../src/index.tsx"],"sourcesContent":["import React, { PureComponent, CSSProperties } from 'react';\n\nfunction getWindow(el: Document) {\n  return el.nodeType === 9 && el.defaultView;\n}\n\nfunction offset(el: Element) {\n  const doc = el?.ownerDocument;\n  const docElem = doc.documentElement;\n  const win: any = getWindow(doc);\n  let box = { top: 0, left: 0 };\n\n  if (!doc) {\n    return {\n      top: 0,\n      left: 0,\n    };\n  }\n\n  if (typeof el.getBoundingClientRect !== typeof undefined) {\n    box = el.getBoundingClientRect();\n  }\n\n  return {\n    top: box.top + win?.pageYOffset - docElem.clientTop,\n    left: box.left + win?.pageXOffset - docElem.clientLeft,\n  };\n}\n\ninterface StickyProps {\n  children: React.ReactNode | ((isSticky: boolean) => React.ReactNode);\n  offsetTop: number;\n  containerSelectorFocus: string;\n  zIndex: number;\n  stickyEnableRange: number[];\n  onChange: (isSticky: boolean) => void;\n}\n\ninterface StickyState {\n  isEnableSticky: boolean;\n  targetHeight: number;\n  innerPosition: string;\n  containerMeasure: Partial<DOMRect>;\n  isLong: boolean;\n  innerTop: number;\n}\n\ntype StickyDefaultProps = Pick<\n  StickyProps,\n  | 'offsetTop'\n  | 'containerSelectorFocus'\n  | 'zIndex'\n  | 'stickyEnableRange'\n  | 'onChange'\n>;\n\nclass Sticky extends PureComponent<StickyProps, StickyState> {\n  private $container!: any;\n  private $inner!: any;\n  private prevScrollY!: number;\n  private isPrevSticky?: boolean;\n\n  public static defaultProps: StickyDefaultProps = {\n    offsetTop: 0,\n    containerSelectorFocus: 'body',\n    zIndex: 10,\n    stickyEnableRange: [0, Infinity],\n    onChange: () => {},\n  };\n\n  public state: StickyState = {\n    isEnableSticky: false,\n    targetHeight: Infinity,\n    innerPosition: 'static',\n    containerMeasure: {},\n    isLong: false,\n    innerTop: 0,\n  };\n\n  public componentDidMount() {\n    window.addEventListener('scroll', this.handleWindowScroll);\n    this.handleWindowResize();\n    window.addEventListener('resize', this.handleWindowResize);\n  }\n\n  public componentWillUnmount() {\n    window.removeEventListener('scroll', this.handleWindowScroll);\n    window.removeEventListener('resize', this.handleWindowResize);\n  }\n\n  private getContainerSelectorFocus = () => {\n    const { containerSelectorFocus } = this.props;\n    return this.$container.closest(containerSelectorFocus);\n  };\n\n  private handleWindowResize = () => {\n    const { stickyEnableRange } = this.props;\n    const [min, max] = stickyEnableRange;\n    this.setState({\n      isEnableSticky: window.innerWidth >= min && window.innerWidth <= max,\n    });\n  };\n\n  private handleWindowScroll = async () => {\n    const { onChange } = this.props;\n    const { isEnableSticky } = this.state;\n    const isSticky = this.checkSticky();\n    const $containerSelectorFocus = this.getContainerSelectorFocus();\n    const { innerHeight: windowHeight } = window;\n    if (this.$container && this.$inner && isEnableSticky) {\n      const { clientHeight: innerHeight } = this.$inner;\n      const containerMeasure = this.$container.getBoundingClientRect();\n      const targetHeight = $containerSelectorFocus\n        ? $containerSelectorFocus.clientHeight\n        : Infinity;\n      await this.setState({\n        containerMeasure: {\n          top: containerMeasure.top,\n          left: containerMeasure.left,\n          width: containerMeasure.width,\n          height: innerHeight,\n        },\n        targetHeight,\n        isLong: innerHeight > windowHeight,\n      });\n      if (innerHeight > windowHeight) {\n        this.handleLong();\n      } else {\n        this.handleShort();\n      }\n      if (this.isPrevSticky !== isSticky) {\n        onChange(isSticky);\n      }\n      this.isPrevSticky = isSticky;\n    }\n  };\n\n  private checkWrapBottom = () => {\n    const { offsetTop } = this.props;\n    const $containerSelectorFocus = this.getContainerSelectorFocus();\n    const { containerMeasure, isLong } = this.state;\n    const targetHeight = $containerSelectorFocus\n      ? $containerSelectorFocus.clientHeight\n      : Infinity;\n    return (\n      (containerMeasure as any)?.top -\n        (containerMeasure as any)?.height +\n        (isLong\n          ? (containerMeasure as any)?.height - window.innerHeight + offsetTop\n          : 0) -\n        offsetTop <\n      targetHeight * -1 -\n        (this.getContainerSelectorFocusOffsetTop() -\n          this.getContainerOffsetTop())\n    );\n  };\n\n  private handleLong = () => {\n    const { scrollY } = window;\n    if (this.prevScrollY > scrollY) {\n      this.handleLongScrollUp(scrollY);\n    } else {\n      this.handleLongScrollDown(scrollY);\n    }\n    this.prevScrollY = scrollY;\n  };\n\n  private getInnerTop = () => {\n    const innerMeasure = this.$inner.getBoundingClientRect();\n    const innerTop = innerMeasure.top || -1;\n    return innerTop;\n  };\n\n  private getInnerOffsetTop = () => {\n    return offset(this.$inner).top;\n  };\n\n  private getContainerOffsetTop = () => {\n    return offset(this.$container).top;\n  };\n\n  private getContainerSelectorFocusOffsetTop = () => {\n    const $containerSelectorFocus = this.getContainerSelectorFocus();\n    return $containerSelectorFocus ? offset($containerSelectorFocus).top : 0;\n  };\n\n  private getContainerSelectorFocusOffsetBottom = () => {\n    const $containerSelectorFocus = this.getContainerSelectorFocus();\n    return $containerSelectorFocus\n      ? Math.trunc(\n          offset($containerSelectorFocus).top +\n            $containerSelectorFocus.clientHeight\n        )\n      : 0;\n  };\n\n  private getInnerPositionTop = () => {\n    if (this.$container && this.$inner) {\n      return this.getInnerOffsetTop() - this.getContainerOffsetTop();\n    }\n    return 0;\n  };\n\n  private handleLongScrollUp = async (scrollY: number) => {\n    const { offsetTop } = this.props;\n    const { containerMeasure, innerPosition } = this.state;\n    const isTop = (containerMeasure as any).top > offsetTop;\n    const innerTop = this.getInnerTop();\n    if (isTop) {\n      this.setState({\n        innerPosition: 'static',\n      });\n    } else {\n      if (\n        (containerMeasure as any).top <= innerTop &&\n        (innerPosition === 'fixedBottom' ||\n          (innerPosition === 'absoluteBottom' &&\n            scrollY + window.innerHeight <=\n              this.getContainerSelectorFocusOffsetBottom()))\n      ) {\n        await this.setState({\n          innerPosition: 'absoluteCenter',\n        });\n      }\n      this.setInnerPositionFixedTop();\n    }\n  };\n\n  private setInnerPositionFixedTop = () => {\n    const { offsetTop } = this.props;\n    const { innerPosition } = this.state;\n    const innerTop = this.getInnerTop();\n    this.setState({\n      innerTop: this.getInnerPositionTop(),\n    });\n    if (innerTop >= offsetTop && innerPosition === 'absoluteCenter') {\n      this.setState({\n        innerPosition: 'fixedTop',\n      });\n    }\n  };\n\n  private handleLongScrollDown = (scrollY: number) => {\n    const { containerMeasure, innerPosition } = this.state;\n    const isBottom =\n      Math.trunc(scrollY + window.innerHeight) >=\n      Math.trunc(this.getInnerOffsetTop() + (containerMeasure as any).height);\n    const isWrapBottom = this.checkWrapBottom();\n    if (innerPosition === 'fixedTop') {\n      this.setState({\n        innerPosition: 'absoluteCenter',\n      });\n    }\n    if (isWrapBottom) {\n      this.setState({\n        innerPosition: 'absoluteBottom',\n      });\n    } else if (isBottom) {\n      this.setState({\n        innerPosition: 'fixedBottom',\n        innerTop: this.getInnerPositionTop(),\n      });\n    }\n  };\n\n  private getShortPosition = (\n    containerMeasure: StickyState['containerMeasure']\n  ) => {\n    const { offsetTop } = this.props;\n    if ((containerMeasure as any).top <= offsetTop) {\n      if (this.checkWrapBottom()) {\n        return 'absoluteBottom';\n      }\n      return 'fixedTop';\n    }\n    return 'static';\n  };\n\n  private handleShort = () => {\n    const { containerMeasure } = this.state;\n    this.setState({\n      innerPosition: this.getShortPosition(containerMeasure),\n    });\n  };\n\n  private getInnerStyle = (): CSSProperties => {\n    const { offsetTop, zIndex } = this.props;\n    const {\n      targetHeight,\n      innerPosition,\n      containerMeasure,\n      isLong,\n      innerTop,\n    } = this.state;\n    const topForAbsoluteBottom =\n      targetHeight -\n      (containerMeasure as any).height +\n      (this.getContainerSelectorFocusOffsetTop() -\n        this.getContainerOffsetTop());\n    if (isLong) {\n      switch (innerPosition) {\n        case 'static':\n          return {};\n        case 'fixedTop':\n          return {\n            position: 'fixed',\n            top: offsetTop,\n            width: containerMeasure.width,\n            zIndex,\n          };\n        case 'absoluteCenter':\n          return {\n            position: 'absolute',\n            top: innerTop,\n            width: containerMeasure.width,\n            zIndex,\n          };\n        case 'absoluteBottom':\n          return {\n            position: 'absolute',\n            top: topForAbsoluteBottom,\n            width: containerMeasure.width,\n            zIndex,\n          };\n        case 'fixedBottom':\n          return {\n            position: 'fixed',\n            bottom: 0,\n            width: containerMeasure.width,\n            zIndex,\n          };\n        default:\n          return {};\n      }\n    }\n    switch (innerPosition) {\n      case 'static':\n        return {};\n      case 'absoluteBottom':\n        return {\n          position: 'absolute',\n          top: topForAbsoluteBottom,\n          width: containerMeasure.width,\n          zIndex,\n        };\n      case 'fixedTop':\n        return {\n          position: 'fixed',\n          top: offsetTop,\n          width: containerMeasure.width,\n          zIndex,\n        };\n      default:\n        return {};\n    }\n  };\n\n  private getContainerStyle = (): CSSProperties => {\n    const { innerPosition, containerMeasure } = this.state;\n    if (innerPosition === 'static') {\n      return {\n        minHeight: containerMeasure.height,\n      };\n    }\n    return {\n      position: 'relative',\n      minHeight: containerMeasure.height,\n    };\n  };\n\n  private checkSticky = () => {\n    const { innerPosition } = this.state;\n    return innerPosition.search(/fixedTop|fixedBottom/g) !== -1;\n  };\n\n  private setContainerRef = (c: any) => {\n    this.$container = c;\n  };\n\n  private setInnerRef = (c: any) => {\n    this.$inner = c;\n  };\n\n  private renderHackGetHeightWhenInnerContentMargin = () => {\n    return <div style={{ fontSize: 0, visibility: 'hidden' }}>.</div>;\n  };\n\n  private renderChildren = () => {\n    const { children } = this.props;\n    const isSticky = this.checkSticky();\n    return typeof children === 'function' ? children(isSticky) : children;\n  };\n\n  public render() {\n    const { isEnableSticky } = this.state;\n    const containerStyle = isEnableSticky ? this.getContainerStyle() : {};\n    const innerStyle = isEnableSticky ? this.getInnerStyle() : {};\n    return (\n      <div ref={this.setContainerRef} style={containerStyle}>\n        <div ref={this.setInnerRef} style={innerStyle}>\n          {this.renderHackGetHeightWhenInnerContentMargin()}\n          {this.renderChildren()}\n          {this.renderHackGetHeightWhenInnerContentMargin()}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Sticky;\n"],"names":["getWindow","el","nodeType","defaultView","offset","doc","ownerDocument","docElem","documentElement","win","box","top","left","getBoundingClientRect","undefined","pageYOffset","clientTop","pageXOffset","clientLeft","Sticky","_PureComponent","_inheritsLoose","_this","isEnableSticky","targetHeight","Infinity","innerPosition","containerMeasure","isLong","innerTop","containerSelectorFocus","props","$container","closest","stickyEnableRange","min","max","setState","window","innerWidth","_asyncToGenerator","_regeneratorRuntime","mark","_callee","onChange","isSticky","$containerSelectorFocus","_window","windowHeight","innerHeight","wrap","_callee$","_context","prev","next","state","checkSticky","getContainerSelectorFocus","$inner","clientHeight","width","height","handleLong","handleShort","isPrevSticky","stop","offsetTop","_this$state","getContainerSelectorFocusOffsetTop","getContainerOffsetTop","_window2","scrollY","prevScrollY","handleLongScrollUp","handleLongScrollDown","innerMeasure","Math","trunc","getInnerOffsetTop","_ref2","_callee2","_this$state2","isTop","_callee2$","_context2","getInnerTop","getContainerSelectorFocusOffsetBottom","setInnerPositionFixedTop","_x","apply","arguments","getInnerPositionTop","_this$state3","isBottom","isWrapBottom","checkWrapBottom","getShortPosition","_this$props","zIndex","_this$state4","topForAbsoluteBottom","position","bottom","_this$state5","minHeight","search","c","React","style","fontSize","visibility","children","_proto","prototype","componentDidMount","addEventListener","handleWindowScroll","handleWindowResize","componentWillUnmount","removeEventListener","render","containerStyle","getContainerStyle","innerStyle","getInnerStyle","ref","setContainerRef","setInnerRef","renderHackGetHeightWhenInnerContentMargin","renderChildren","PureComponent"],"mappings":"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"}